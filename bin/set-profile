#!/bin/sh

. $(dirname $0)/detect-os

file=${HOME}/.profile
config=${HOME}/opt/rtools/conf/${os_name}/_profile
xtra_config=${HOME}/xtra/rtools/conf/${os_name}/_profile

if [ ! -f ${file}.ori ]; then
    echo "Creating ${file}.ori..."
    if [ ! -f ${file} ]; then
        touch ${file}
    fi
    cp -p ${file} ${file}.ori
else
    echo "${file}.ori exists."
fi

cp -p ${file}.ori ${file}
echo "" >> ${file}
echo "# repsodi" >> ${file}
echo "source ${config}" >> ${file}
echo "if [ -f ${xtra_config} ]; then" >> ${file}
echo "    source ${xtra_config}" >> ${file}
echo "fi" >> ${file}
echo "${file} has been generated."
ls -la ${file}*
